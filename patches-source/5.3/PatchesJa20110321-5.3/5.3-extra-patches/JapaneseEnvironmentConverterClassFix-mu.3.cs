'From Squeak4.1 of 17 April 2010 [latest update: #9957] on 29 April 2010 at 11:33:29 pm'!"Change Set:		JapaneseEnvironmentConverterClassFix-muDate:			29 April 2010Author:			Masashi UmezawaBetter support for Squak 4.1 - Normally VM using UTF8"!!JapaneseEnvironment class methodsFor: 'subclass responsibilities' stamp: 'mu 4/29/2010 23:31'!clipboardInterpreterClass	| platformName osVersion |	platformName := SmalltalkImage current  platformName.	osVersion := SmalltalkImage current osVersion.	(platformName = 'Win32' and: [osVersion = 'CE']) 		ifTrue: [^NoConversionClipboardInterpreter].	platformName = 'Win32' ifTrue: [^UTF8ClipboardInterpreter].	platformName = 'Mac OS' 		ifTrue: [			^('4.*' match: (SmalltalkImage current vmVersion reverse upTo: Character space) reverse) ifTrue: [MacUTF8ClipboardInterpreter] ifFalse: [MacShiftJISClipboardInterpreter]].	^platformName = 'unix' 		ifTrue: 			[(ShiftJISTextConverter encodingNames includes: X11Encoding getEncoding) 				ifTrue: [MacShiftJISClipboardInterpreter]				ifFalse: [UnixJPClipboardInterpreter]]		ifFalse: [ UTF8ClipboardInterpreter ]! !!JapaneseEnvironment class methodsFor: 'subclass responsibilities' stamp: 'mu 4/29/2010 23:30'!systemConverterClass	| platformName osVersion encoding |	platformName := SmalltalkImage current platformName.	osVersion := SmalltalkImage current osVersion.	(platformName = 'Win32') 		ifTrue: [^UTF8TextConverter].	(platformName = 'ZaurusOS') 		ifTrue: [^ShiftJISTextConverter].	platformName = 'Mac OS' 		ifTrue: 			[^('10*' match: osVersion) 				ifTrue: [UTF8TextConverter]				ifFalse: [ShiftJISTextConverter]].	platformName = 'unix' 		ifTrue: 			[encoding := X11Encoding encoding.			encoding ifNil: [^UTF8TextConverter].			(encoding = 'utf-8') 				ifTrue: [^UTF8TextConverter].							(encoding = 'shiftjis' or: [ encoding = 'sjis' ]) 				ifTrue: [^ShiftJISTextConverter].							^EUCJPTextConverter].	^UTF8TextConverter! !