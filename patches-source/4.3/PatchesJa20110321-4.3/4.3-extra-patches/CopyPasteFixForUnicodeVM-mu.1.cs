'From Squeak4.1 of 17 April 2010 [latest update: #9957] on 25 April 2010 at 1:15:58 am'!"Change Set:		CopyPasteAndMouseWheelFixForUnicodeVM-muDate:			6 February 2010Author:			Masashi UmezawaAdd support for MouseWheel and Ctrl-CopyPaste in new Windows VM"!!HandMorph methodsFor: 'private events' stamp: 'mu 2/6/2010 18:34'!generateKeyboardEvent: evtBuf	"Generate the appropriate mouse event for the given raw event buffer"	| buttons modifiers type pressType stamp char keyValue charCode |	stamp := evtBuf second.	stamp = 0 ifTrue: [stamp := Time millisecondClockValue].	pressType := evtBuf fourth.	pressType = EventKeyDown ifTrue: [type := #keyDown].	pressType = EventKeyUp ifTrue: [type := #keyUp].	pressType = EventKeyChar ifTrue: [type := #keystroke].	modifiers := evtBuf fifth.	buttons := modifiers bitShift: 3.		keyValue := evtBuf third.	charCode := evtBuf sixth.	(charCode isNil or: [charCode = 0]) ifTrue: [evtBuf at: 6 put: keyValue].			char := self keyboardInterpreter nextCharFrom: Sensor firstEvt: evtBuf.	^ KeyboardEvent new		setType: type		buttons: buttons		position: self position		keyValue: char asciiValue		hand: self		stamp: stamp.! !